# xsession file
if [ -z "$XDG_CONFIG_HOME" ]; then
	export XDG_CONFIG_HOME="$HOME/.config"
fi

if [ -z "$XDG_DATA_HOME" ]; then
	export XDG_DATA_HOME="$HOME/.local/share"
fi

# Ensure the existance of the 'Desktop' folder
if [ -e "$XDG_CONFIG_HOME/user-dirs.dirs" ]; then
	. "$XDG_CONFIG_HOME/user-dirs.dirs"
else
	XDG_DESKTOP_DIR="$HOME/Desktop"
fi
mkdir -p "$XDG_DESKTOP_DIR"

# Ensure the existance of the user applications folder
USER_APPS_DIR="$XDG_DATA_HOME/applications"
mkdir -p "$USER_APPS_DIR"

# Clean up after GDM (GDM sets the number of desktops to one)
xprop -root -remove _NET_NUMBER_OF_DESKTOPS -remove _NET_DESKTOP_NAMES -remove _NET_CURRENT_DESKTOP 2> /dev/null

# Enable GTK+2 integration for OpenOffice.org, if available.
export SAL_USE_VCLPLUGIN=gtk

export XDG_MENU_PREFIX="spectrwm-"
export XDG_CURRENT_DESKTOP="spectrwm"

## resolution and cli colour scheme
xrdb -merge $HOME/.Xresources
xrdb -merge $HOME/.Xresources-spectrwm
xrandr --dpi 108
## auto start
dex -a -s ~/.config/autostart-dwm
## desktop background
nitrogen --restore &
## compositing
picom &
## screen locking
xset s 180 120
xss-lock -l -n dim-screen.sh -- transfer-sleep-lock-generic-delay.sh &
## keyboard response
xset r rate 270 30
## cursor fiddle
xsetroot -cursor_name left_ptr

## Min Dependancies
# i3lock-fancy-rapid	- AUR (screen locking)
# xss-lock		- Arch (screen locking)
# dswitcher		- https://github.com/rjl6789/dswitcher (spectrwm switch / grab any window)
# dmenu			- Arch (for lots - note arch version seems to support xft fonts)
# alacritty		- Arch (a terminal - alter spectrwm.conf if want to use another)
# dex			- Arch (for autostarting)
# stalonetray 		- Arch - so I can see bluetooth and network - although nmtui and bluetoothctl are good cli apps
# various scripts in .scripts folder
#
## Printing
# cups			- Arch - for printing
# cups-pk-helper	- Arch - for printing
# system-config-printer	- Arch - for printing
# avahi			- Arch - for printing
# nss-mdns		- Arch - for printing
# cnijfilter-ip8700	- https://github.com/rjl6789/cnijfilter-ip8700 (my printer driver)
#
#
## more dependancies and notes
# a polkit agent - e.g. mate-authentication-agent, kde etc
# libinput-gestures
# networkmanager and networkmanager applet
# blueman - for bluetooth
# pulseaudio - for making life easier with sound
#
# lots of these have autostart's - I've created a directory and put sym links to the important ones e.g.
# these then get started with dex
#
# at-spi-dbus-bus.desktop -> /etc/xdg/autostart/at-spi-dbus-bus.desktop
# autorandr.desktop -> /etc/xdg/autostart/autorandr.desktop
# blueman.desktop -> /home/rob/.config/autostart/blueman.desktop
# libinput-gestures.desktop -> /home/rob/.config/autostart/libinput-gestures.desktop
# nm-applet.desktop -> /etc/xdg/autostart/nm-applet.desktop
# polkit-kde-authentication-agent-1.desktop -> /etc/xdg/autostart/polkit-kde-authentication-agent-1.desktop
# print-applet.desktop -> /etc/xdg/autostart/print-applet.desktop
# pulseaudio.desktop -> /etc/xdg/autostart/pulseaudio.desktop
